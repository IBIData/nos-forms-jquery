/*
 *  nos-forms-jquery - v1.0.0
 *  Build html forms with JSON objects easily with jQuery and Bootstrap
 *  
 *
 *  Made by IBI Data
 *  Under MIT License
 */
!function(a,b,c){"use strict";function d(b,d){var e=this;this.form=a(b),this.settings=a.extend({},f,d);var g=this.settings;this.elements={text:["text","email","tel","password","number","hidden","zip","date","week","time","month","datetime-local","search","url","range","color"],textarea:["textarea"],buttons:["submit","reset","button","image"],select:["select"],file:["file"],check:["checkbox","radio"],state:["state"]},this.getAttrs=function(b){return a.extend({},b,{type:b.type&&' type="'+b.type+'"'||"",name:b.name&&' name="'+b.name+'"'||"",id:(b.id||b.name)&&' id="'+(b.id||b.name)+'"'||"",minlength:b.minlength&&' minlength="'+b.minlength+'"'||"",maxlength:b.maxlength&&' maxlength="'+b.maxlength+'"'||"",required:b.required&&" required"||"",value:b.value&&' value="'+b.value+'"'||"",placeholder:b.placeholder&&' placeholder="'+b.placeholder+'"'||"",classname:b.classname&&' class="'+b.classname+'"'||"",multiple:b.multiple&&" multiple"||"",autofocus:b.autofocus&&" autofocus"||"",disabled:b.disabled&&" disabled"||"",readonly:b.readonly&&" readonly"||"",title:b.title&&' title="'+b.title+'"'||"",size:b.size&&' size="'+b.size+'"'||"",message:e.getUserErrorMessages(b)})},this.getUserErrorMessages=function(b){return a.extend({},{required:b.required&&e.userErrorMessage.required(b),valid:("email"===b.type||"zip"===b.type||"tel"===b.type||b.pattern)&&e.userErrorMessage.valid(b)||"",minlength:b.minlength&&b.minlength>1&&e.userErrorMessage.minlength(b)||"",min:b.min&&b.min>1&&e.userErrorMessage.min(b)||"",max:b.max&&e.userErrorMessage.max(b)||""})},this.getElements={self:this,formGroup:function(){return{start:'<div class="form-group nos-group">',end:"</div>"}},div:function(a){return{start:'<div class="'+a+'">',end:"</div>"}},fieldset:function(a){return{start:'<fieldset id="'+a+'">',end:"</fieldset>"}},label:function(a){var b;return a.required?b=' class="required-field"':"",'<label for="'+(a.id||a.name)+'"'+b+">"+a.label+"</label>"},text:function(b){var c,d;c=b.formGroup?this.formGroup():"",d=b.label?this.label(b):"";var e=a.extend(this.self.getAttrs(b),{pattern:b.pattern&&' pattern="'+b.pattern+'"'||"",autocomplete:b.autocomplete&&' autocomplete="'+b.autocomplete+'"'||"",step:b.step&&' step="'+b.step+'"'||"",min:b.min&&' min="'+b.min+'"'||"",max:b.max&&' max="'+b.max+'"'||""}),f=(c.start||"")+d+"<input data-nos"+e.type+e.name+e.id+e.minlength+e.maxlength+e.placeholder+e.classname+e.value+e.title+e.min+e.max+e.step+e.size+e.pattern+e.autocomplete+e.multiple+e.readonly+e.disabled+e.autofocus+e.required+">"+(e.message.required||"")+(e.message.minlength||"")+(e.message.valid||"")+(e.message.min||"")+(e.message.max||"")+(c.end||"");return f},buttons:function(b){var c,d=b.formGroup&&"nos-form-group nos-group "||"",e=b.inline&&"nos-inline"||"";c=b.formGroup||b.inline?this.div(d+e):"";var f=a.extend(this.self.getAttrs(b),{src:b.src&&' src="'+b.src+'"'||"",alt:b.alt&&' alt="'+b.alt+'"'||"",formaction:b.formaction&&' formaction="'+b.formaction+'"'||"",formenctype:b.formenctype&&' formenctype="'+b.formenctype+'"'||"",formmethod:b.formmethod&&' formmethod="'+b.formmethod+'"'||"",formnovalidate:b.formnovalidate&&" formnovalidate"||"",formtarget:b.formtarget&&' formtarget="'+b.formtarget+'"'||"",height:b.height&&' height="'+b.height+'"'||"",width:b.width&&' width="'+b.width+'"'||""}),g=(c.start||"")+"<input data-nos"+f.type+f.name+f.id+f.classname+f.title+f.src+f.alt+f.height+f.width+f.formtarget+f.formmethod+f.formaction+f.formenctype+f.disabled+f.value+f.formnovalidate+">&nbsp;"+(c.end||c);return g},textarea:function(b){var c,d;c=b.formGroup?this.formGroup():"",d=b.label?this.label(b):"";var e=a.extend(this.self.getAttrs(b),{rows:b.rows&&' rows="'+b.rows+'"'||"",cols:b.cols&&' cols="'+b.cols+'"'||"",wrap:b.wrap&&' wrap="'+b.wrap+'"'||""}),f=(c.start||"")+d+"<textarea data-nos"+e.name+e.id+e.title+e.minlength+e.maxlength+e.placeholder+e.classname+e.value+e.rows+e.cols+e.wrap+e.readonly+e.disabled+e.autofocus+e.required+"></textarea>"+(e.message.required||"")+(e.message.minlength||"")+(c.end||"");return f},select:function(b){var c,d,e="";c=b.formGroup?this.formGroup():"",d=b.label?this.label(b):"";var f=this.self.getAttrs(b);a.each(b.options,function(a,b){var c;c=f.selected===a?" selected":"",e+='<option value="'+a+'" '+c+">"+b+"</option>"});var g=(c.start||"")+d+"<select data-nos"+f.name+f.id+f.classname+f.multiple+f.title+f.size+f.readonly+f.disabled+f.autofocus+f.required+">"+e+"</select>"+(f.message.required||"")+(c.end||"");return g},check:function(b){var c,d,e,f="",g=this.fieldset(b.name),h=b.type;c=b.formGroup?this.formGroup():"",d=b.label?this.label(b):"",e=b.inline?"":this.div(h);var i=a.extend(this.self.getAttrs(b),{inline:b.inline&&' class="'+h+'-inline"'||"",name:b.name&&"checkbox"===b.type?' name="'+b.name+'[]"':' name="'+b.name+'"',id:' id="'+b.name+"-"}),j=(c.start||"")+d+(g.start||"");return a.each(b.options,function(c,d){"object"==typeof b.checked?f=a.inArray(c,b.checked)>-1?" checked":"":"string"==typeof b.checked?f=c===b.checked?" checked":"":console.warn('Your checkbox/radio "checked" property must be an object or string'),j+=(e.start||"")+"<label"+i.inline+"><input data-nos"+i.type+i.name+i.title+i.id+c+'" '+i.classname+' value="'+c+'"'+f+i.disabled+i.autofocus+i.required+">"+d+"</label>"+(e.end||"")}),j+=(g.end||"")+(i.message.required||"")+(c.end||"")},file:function(b){var c,d,e=this.div(b.classname);c=b.formGroup?this.formGroup():"",d=b.label?this.label(b):"";var f=a.extend(this.self.getAttrs(b),{accept:b.accept&&' accept="'+b.accept+'"'||""}),g=(c.start||"")+d+(e.start||"")+"<input data-nos"+f.type+f.name+f.id+f.title+f.accept+f.multiple+f.disabled+f.autofocus+f.required+">"+(f.message.required||"")+(e.end||"")+(c.end||"");return g},state:function(b){function c(a,b){var c,d,e=[],f={};for(c in a)e.push(c);if(e.sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())}),"desc"===b)for(d=e.length-1;d>=0;d--)f[e[d]]=a[e[d]];else for(d=0;d<e.length;d++)f[e[d]]=a[e[d]];return f}var d,e;d=b.formGroup?this.formGroup():"",e=b.label?this.label(b):"";var f={"American Samoa":"AS","Federated States Of Micronesia":"FM",Guam:"GU","Marshall Islands":"MH","Northern Mariana Islands":"MP",Palau:"PW","Puerto Rico":"PR","Virgin Islands":"VI"},g={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District Of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"},h={Alberta:"AB","British Columbia":"BC",Manitoba:"MB","New Brunswick":"NB","Newfoundland and Labrador":"NL","Nova Scotia":"NS","Northwest Territories":"NT",Nunavut:"NU",Ontario:"ON","Prince Edward Island":"PE",Quebec:"QC",Saskatchewan:"SK",Yukon:"YT"},i=c(a.extend(g,b.usTerritory&&f,b.canada&&h)),j='<option value="">'+(b.defaultSelected||"Select One...")+"</option>",k=this.self.getAttrs(b);a.each(i,function(a,b){var c;c=k.selected===b?" selected":"",j+='<option value="'+b+'" '+c+">"+a+"</option>"});var l=(d.start||"")+e+"<select data-nos "+k.name+k.id+k.classname+k.size+k.multiple+k.readonly+k.disabled+k.autofocus+k.required+">"+j+"</select>"+(k.message.required||"")+(d.end||"");return l}},this.userErrorMessage={required:function(a){var b;return b=a.messages?a.messages.required:null,'<div style="display: none;" class="alert alert-danger nos-help nos-required msg-required-'+a.name+'">'+(b||(a.label||a.placeholder)+" is a required field")+"</div>"},valid:function(a){var b;return b=a.messages?a.messages.invalid:null,'<div style="display: none;" class="alert alert-warning nos-help nos-invalid msg-invalid-'+a.name+'">'+(b||(a.label||a.placeholder)+" must be valid")+"</div>"},minlength:function(a){var b;return b=a.messages?a.messages.minlength:null,'<div style="display: none;" class="alert alert-warning nos-help nos-invalid msg-minlength-'+a.name+'">'+(b||(a.label||a.placeholder)+" must be a minimum of "+a.minlength+" characters")+"</div>"},min:function(a){var b;return b=a.messages?a.messages.min:null,'<div style="display: none;" class="alert alert-warning nos-help nos-invalid msg-min-'+a.name+'">'+(b||(a.label||a.placeholder)+" must have a minimum value of "+a.min)+"</div>"},max:function(a){var b;return b=a.messages?a.messages.max:null,'<div style="display: none;" class="alert alert-warning nos-help nos-invalid msg-max-'+a.name+'">'+(b||(a.label||a.placeholder)+" must have a maximum value of "+a.max)+"</div>"},form:{required:function(a){return'<div style="display: none;" class="alert alert-danger nos-help nos-form-required msg-required-'+(a.name||a.id)+'">'+e.settings.messages.required+"</div>"},invalid:function(a){return'<div style="display: none;" class="alert alert-warning nos-help nos-form-invalid msg-invalid-'+(a.name||a.id)+'">'+e.settings.messages.invalid+"</div>"}}},this.validator={email:function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},phone:function(a){return/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/.test(a)},zipcode:function(a){return/^\d{5}(-\d{4})?$/.test(a)},sanitize:function(a){var b=a.replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<[\/\!]*?[^<>]*?>/gi,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/gi,"");return b}},this.submitValidation=function(b){var d=a(b).serializeArray(),f={};a.each(d,function(a,b){-1===b.name.indexOf("[]")&&(f[b.name]=b.value)});var h=a("[data-nos]:not(:radio, :checkbox, :button, :submit, :reset, :file, :image, select)").filter("[required]:visible"),i=a("select[data-nos]").filter("[required]:visible"),j=a(":file[data-nos]").filter("[required]:visible"),k=a(":checkbox[data-nos]").parents("fieldset"),l=a(":checkbox, :radio[data-nos]").filter("[required]:visible").parents("fieldset");if(l){var m={},n={};l.each(function(b){var c=a(this).find(":checkbox, :radio");n[b]=".msg-required-"+a(this).attr("id"),m[b]=[],a(c).each(function(){a(this).is(":checked")&&m[b].push(this.value)}),m[b].length<1&&a(n[b]).slideDown(),a(c).change(function(){a.inArray(this,m[b])>-1?m[b].splice(this,1):m[b].push(this),m[b].length>0&&a(n[b]).slideUp()})})}if(k){var o={};k.each(function(b){var c=a(this).attr("id"),d=a(this).find(":checkbox");o[b]={},d.each(function(){var c=a(this).attr("value");o[b][c]=this.checked}),f[c]=o[b]})}a(h).each(function(b){var c=h[b],d=".msg-required-"+c.name,f=a(this).attr("data-mask");c.value=e.validator.sanitize(c.value),f?a(c).caret().begin<1&&(a(d).slideDown(),a(this).bind("keyup keydown change blur paste",function(){a(this).caret().begin>0&&a(d).slideUp(),a(this).caret().begin<1&&a(d).slideDown()})):a(c).val().length<1&&(a(d).slideDown(),a(this).bind("keyup keydown change blur paste",function(){this.value.length>0&&a(d).slideUp(),this.value.length<1&&a(d).slideDown()}))}),a(i).each(function(b){var c=i[b],d=".msg-required-"+c.name;""===a(c).val()&&(a(d).slideDown(),a(this).change(function(){""!==a(this).val()&&a(d).slideUp(),""===a(this).val()&&a(d).slideDown()}))}),a(j).each(function(b){var d=j[b],e=".msg-required-"+d.name,g=c.getElementById(d.id).files||c.getElementById(d.id).value;0===g.length&&(a(e).slideDown(),a(this).change(function(){""!==a(this).val()&&a(e).slideUp(),""===a(this).val()&&a(e).slideDown()})),f[d.name]=g}),a(".nos-help").is(":visible")?(a(".nos-required").is(":visible")&&(a(".nos-form-required").slideDown(),a(":input, select, textarea").bind("change keyup blur focus paste",function(){a(".nos-required").is(":visible")?a(".nos-form-required").slideDown():a(".nos-form-required").slideUp()})),a(".nos-invalid").is(":visible")&&(a(".nos-form-invalid").slideDown(),a(":input, select, textarea").bind("change keyup blur focus paste",function(){a(".nos-invalid").is(":visible")?a(".nos-form-invalid").slideDown():a(".nos-form-invalid").slideUp()}))):g.submit(f)},this.validate=function(b){function c(){a(":reset[data-nos]").click(function(){a(this).closest("form").find(":input:not(:submit, :reset, :button, :image)").val(""),a(".nos-help").slideUp()})}function d(b){var c=b.id||b.name;a("#"+c).keydown(function(c){a(this).val().length>b.maxlength&&c.preventDefault()})}function f(b){var c=".msg-minlength-"+b.name,d="#"+(b.id||b.name);a(d).bind("keyup change blur focus paste",function(){var d=a(this).val().length;d>0&&d<b.minlength?a(c).slideDown():a(c).slideUp()})}function g(b){var c=".msg-min-"+b.name,d=".msg-max-"+b.name,e="#"+(b.id||b.name);a(e).bind("keyup keydown change blur focus paste",function(){var e=a(this).val();e>0?(e<b.min?a(c).slideDown():a(c).slideUp(),e>b.max?a(d).slideDown():a(d).slideUp()):a(c).slideUp()})}function h(b){var c=b.name,d=".msg-invalid-"+c,e="#"+(b.id||c),f=new RegExp(b.pattern);a(e).bind("keyup change blur focus paste",function(){a(this).val().length>0?f.test(a(this).val())?a(d).slideUp():a(d).slideDown():a(d).slideUp()})}function i(b){var c,d=b.name,f=".msg-invalid-"+d,g="#"+(b.id||d);a(g).bind("keyup change blur paste",function(){switch(b.type){case"email":c=a(this).val(),c.length>0&&(e.validator.email(c)?a(f).slideUp():a(f).slideDown()),""===c&&a(f).slideUp();break;case"zip":c=a(this).val(),a.mask&&b.mask?(a(this).caret().begin>0&&(e.validator.zipcode(c)?a(f).slideUp():a(f).slideDown()),0===a(this).caret().end&&a(f).slideUp()):(c.length>0&&(e.validator.zipcode(c)?a(f).slideUp():a(f).slideDown()),""===c&&a(f).slideUp());break;case"tel":c=a(this).val(),a.mask&&b.mask?(a(this).caret().begin>0&&(e.validator.phone(c)?a(f).slideUp():a(f).slideDown()),0===a(this).caret().end&&a(f).slideUp()):(c.length>0&&(e.validator.phone(c)?a(f).slideUp():a(f).slideDown()),""===c&&a(f).slideUp())}})}function j(b,e){e.mask&&(a.mask?a("#"+(e.id||e.name)).mask(e.mask):console.warn('You must include the masked input plugin to use "mask". Go here: https://github.com/digitalBush/jquery.maskedinput'),a("#"+(e.id||e.name)).attr("data-mask",!0)),"reset"===e.type&&c(),("email"===e.type||"zip"===e.type||"tel"===e.type)&&i(e),e.pattern&&h(e),e.maxlength&&d(e),e.minlength&&f(e),(e.min||e.max)&&g(e)}a.each(b,function(b,c){this.column?a.each(this.column,function(a,b){j(a,b)}):j(b,c)})},this.errorMessages=function(){var a=this.settings;"object"!=typeof a.fields&&console.warn("Your form data is not an object!"),"boolean"!=typeof a.validate&&console.warn('"validate" must have a boolean value!'),"boolean"!=typeof a.htmlValidation&&console.warn('"htmlValidation" must have a boolean value!'),"function"!=typeof a.submit&&console.warn('"submit" must be a function!'),"number"!=typeof a.animationSpeed&&console.warn('"animationSpeed" must be a number!'),"object"!=typeof a.messages&&console.warn('"messages" must be an object!')},this.setBehavior=function(b){!this.settings.htmlValidation&&this.form.attr("novalidate",""),a.prototype.slideDown=function(a){var c=b.animationSpeed;return function(b){a.call(this,b||c)}}(a.prototype.slideDown),a.prototype.slideUp=function(a){var c=b.animationSpeed;return function(b){a.call(this,b||c)}}(a.prototype.slideUp)},this.build=function(){var b=this,c=0,d="",e=this.settings.fields,f=this.settings.fields.length-1,g=this.settings.fields.length;a.each(e,function(){var e=0;if(this.column)d+='<div class="'+this.classname+'">',a.each(this.column,function(){++e;var c=this;a.each(b.elements,function(e){a.inArray(c.type,this)>-1&&(d+=b.getElements[e](c))})}),e===f&&(d+=b.userErrorMessage.form.required(b.form[0]),d+=b.userErrorMessage.form.invalid(b.form[0])),d+="</div>";else{var h=this;a.each(b.elements,function(e){a.inArray(h.type,this)>-1&&(++c,d+=b.getElements[e](h),c===g&&(d+=b.userErrorMessage.form.required(b.form[0]),d+=b.userErrorMessage.form.invalid(b.form[0])))})}}),this.render(d)},this.render=function(c){a(b).append(c)},this.init()}var e="nosForm",f={fields:{},animationSpeed:100,validate:!0,htmlValidation:!1,messages:{required:"Please fill out all required fields",invalid:"Please correct errors"}};a.extend(d.prototype,{init:function(){var b=this.settings,c=this;this.errorMessages(),this.setBehavior(this.settings),this.build(),this.settings.validate&&this.validate(this.settings.fields),this.form.submit(function(d){d.preventDefault(),b.validate&&c.submitValidation(a(this))})}}),a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document);