/*
 *  nos-forms-jquery - v1.0.0
 *  Build html forms with JSON objects easily with jQuery
 *  
 *
 *  Made by 
 *  Under MIT License
 */
!function(a,b,c){"use strict";function d(b,d){var g=this;this.form=a(b),this.settings=a.extend({},f,d);var h=this.settings;this._defaults=f,this._name=e,this.elements={text:["text","email","tel","password","number","hidden","zip","date","week","image","time","month","datetime-local","search","url","range","color"],textarea:["textarea"],buttons:["submit","reset","button"],select:["select"],file:["file"],check:["checkbox","radio"],state:["state"]},this.htmlValidation=function(){!this.settings.htmlValidation&&this.form.attr("novalidate","")},this.getAttrs=function(b){return a.extend({},b,{type:b.type&&' type="'+b.type+'"'||"",name:b.name&&' name="'+b.name+'"'||"",id:(b.id||b.name)&&' id="'+(b.id||b.name)+'"'||"",minlength:b.minlength&&' minlength="'+b.minlength+'"'||"",maxlength:b.maxlength&&' maxlength="'+b.maxlength+'"'||"",required:b.required&&" required"||"",value:-1===a.inArray(b.type,this.elements.buttons)?b.value&&' value="'+b.value+'"'||"":b.value,classname:b.classname&&' class="'+b.classname+'"'||"",placeholder:b.placeholder&&' placeholder="'+b.placeholder+'"'||"",rows:b.rows&&' rows="'+b.rows+'"'||"",min:b.min&&' min="'+b.min+'"'||"",max:b.max&&' max="'+b.max+'"'||"",step:b.step&&' step="'+b.step+'"'||"",size:b.size&&' size="'+b.size+'"'||"",multiple:b.multiple&&" multiple"||"",src:b.src&&' src="'+b.src+'"'||"",alt:b.alt&&' alt="'+b.alt+'"'||"",accept:b.accept&&' accept="'+b.accept+'"'||"",message:g.getUserErrorMessages(b)})},this.getUserErrorMessages=function(b){return a.extend({},{required:b.required&&g.userErrorMessage.required(b)||"",valid:("email"===b.type||"zip"===b.type||"tel"===b.type)&&g.userErrorMessage.valid(b)||"",minlength:b.minlength&&b.minlength>1&&g.userErrorMessage.minlength(b)||"",min:b.min&&b.min>1&&g.userErrorMessage.min(b)||"",max:b.max&&g.userErrorMessage.max(b)||""})},this.getElements={self:this,formGroup:function(){return{start:'<div class="form-group nos-group">',end:"</div>"}},div:function(a){return{start:'<div class="'+a+'">',end:"</div>"}},fieldset:function(a){return{start:'<fieldset id="'+a+'">',end:"</fieldset>"}},label:function(a){return'<label for="'+a.name+'">'+a.label+"</label>"},styles:{counter:0,buttonGroup:function(b){++this.counter;var c,d;b.stacked?(c="block",d="0"):(c="inline-block",d="15px");var e=a("<style>.nos-form-group {margin-bottom: "+d+";display: "+c+";}</style>");return 1===this.counter&&a("head").append(e),{start:'<div class="nos-form-group nos-group">',end:"</div>&nbsp;"}}},text:function(a){var b,c;b=a.formGroup?this.formGroup():"",c=a.label?this.label(a):"";var d=this.self.getAttrs(a),e=(b.start||"")+c+"<input"+d.type+d.name+d.id+d.minlength+d.maxlength+d.placeholder+d.classname+d.value+d.min+d.max+d.step+d.size+d.src+d.alt+d.required+">"+(d.message.required||"")+(d.message.minlength||"")+(d.message.valid||"")+(d.message.min||"")+(d.message.max||"")+(b.end||"");return e},buttons:function(b){var c;c=b.formGroup||b.stacked?this.styles.buttonGroup(b):"&nbsp;";var d=a.extend(this.self.getAttrs(b),{value:b.value}),e=(c.start||"")+"<button"+d.type+d.name+d.id+d.classname+">"+d.value+"</button>"+(c.end||c);return e},textarea:function(a){var b,c;b=a.formGroup?this.formGroup():"",c=a.label?this.label(a):"";var d=this.self.getAttrs(a),e=(b.start||"")+c+"<textarea"+d.name+d.id+d.minlength+d.maxlength+d.placeholder+d.classname+d.value+d.rows+d.required+"></textarea>"+(d.message.required||"")+(d.message.minlength||"")+(b.end||"");return e},select:function(b){var c,d,e="";c=b.formGroup?this.formGroup():"",d=b.label?this.label(b):"";var f=this.self.getAttrs(b);a.each(b.options,function(a,b){var c;c=f.selected===a?" selected":"",e+='<option value="'+a+'" '+c+">"+b+"</option>"});var g=(c.start||"")+d+"<select"+f.name+f.id+f.classname+f.multiple+f.required+">"+e+"</select>"+(f.message.required||"")+(c.end||"");return g},check:function(b){var c,d,e,f="",g=this.fieldset(b.name),h=b.type;c=b.formGroup?this.formGroup():"",d=b.label?this.label(b):"",e=b.inline?"":this.div(h);var i=a.extend(this.self.getAttrs(b),{inline:b.inline&&' class="'+h+'-inline"'||"",name:b.name&&"checkbox"===b.type?' name="'+b.name+'[]"':' name="'+b.name+'"',id:' id="'+b.name+"-"}),j=(c.start||"")+d+(g.start||"");return a.each(b.options,function(c,d){"object"==typeof b.checked?f=a.inArray(c,b.checked)>-1?" checked":"":"string"==typeof b.checked?f=c===b.checked?" checked":"":console.warn('Your checkbox/radio "checked" property must be an object or string'),j+=(e.start||"")+"<label"+i.inline+"><input"+i.type+i.name+i.id+c+'" '+i.classname+' value="'+c+'"'+f+i.required+">"+d+"</label>"+(e.end||"")}),j+=(g.end||"")+(i.message.required||"")+(c.end||"")},file:function(a){var b,c,d=this.div(a.classname);b=a.formGroup?this.formGroup():"",c=a.label?this.label(a):"";var e=this.self.getAttrs(a),f=(b.start||"")+c+(d.start||"")+"<input"+e.type+e.name+e.id+e.accept+e.multiple+e.required+">"+(e.message.required||"")+(d.end||"")+(b.end||"");return f},state:function(b){function c(a,b){var c,d,e=[],f={};for(c in a)e.push(c);if(e.sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())}),"desc"===b)for(d=e.length-1;d>=0;d--)f[e[d]]=a[e[d]];else for(d=0;d<e.length;d++)f[e[d]]=a[e[d]];return f}var d,e;d=b.formGroup?this.formGroup():"",e=b.label?this.label(b):"";var f={"American Samoa":"AS","Federated States Of Micronesia":"FM",Guam:"GU","Marshall Islands":"MH","Northern Mariana Islands":"MP",Palau:"PW","Puerto Rico":"PR","Virgin Islands":"VI"},g={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District Of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"},h={Alberta:"AB","British Columbia":"BC",Manitoba:"MB","New Brunswick":"NB","Newfoundland and Labrador":"NL","Nova Scotia":"NS","Northwest Territories":"NT",Nunavut:"NU",Ontario:"ON","Prince Edward Island":"PE",Quebec:"QC",Saskatchewan:"SK",Yukon:"YT"},i=c(a.extend(g,b.usTerritory&&f,b.canada&&h)),j='<option value="">'+(b.defaultSelected||"Select One...")+"</option>",k=this.self.getAttrs(b);a.each(i,function(a,b){var c;c=k.selected===b?" selected":"",j+='<option value="'+b+'" '+c+">"+a+"</option>"});var l=(d.start||"")+e+"<select "+k.name+k.id+k.classname+k.multiple+k.required+">"+j+"</select>"+(k.message.required||"")+(d.end||"");return l}},this.validator={email:function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},phone:function(a){return/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/.test(a)},zipcode:function(a){return/^\d{5}(-\d{4})?$/.test(a)},sanitize:function(a){var b=a.replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<[\/\!]*?[^<>]*?>/gi,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/gi,"");return b}},this.userErrorMessage={required:function(a){return'<span style="display: none;" class="help-block nosform-help msg-required-'+a.name+'">'+(a.label||a.placeholder)+" is a required field</span>"},valid:function(a){return'<span style="display: none;" class="help-block nosform-help msg-invalid-'+a.name+'">'+(a.label||a.placeholder)+" must be valid</span>"},minlength:function(a){return'<span style="display: none;" class="help-block nosform-help msg-minlength-'+a.name+'">'+(a.label||a.placeholder)+" must be a minimum of "+a.minlength+" characters</span>"},min:function(a){return'<span style="display: none;" class="help-block nosform-help msg-min-'+a.name+'">'+(a.label||a.placeholder)+" must be a minimum of "+a.min+"</span>"},max:function(a){return'<span style="display: none;" class="help-block nosform-help msg-max-'+a.name+'">'+(a.label||a.placeholder)+" must be no more than "+a.max+"</span>"}},this.submitValidation=function(b){var d=a(b).serializeArray(),e={};a.each(d,function(a,b){-1===b.name.indexOf("[]")&&(e[b.name]=b.value)});var f=a("input:not(:radio, :checkbox, :button, :submit, :reset, :file, :image), textarea").filter("[required]:visible"),i=a("select").filter("[required]:visible"),j=a(":file").filter("[required]:visible"),k=a(":checkbox").parents("fieldset"),l=a(":checkbox, :radio").filter("[required]:visible").parents("fieldset");if(l){var m={},n={};l.each(function(b){var c=a(this).find(":checkbox, :radio");n[b]=".msg-required-"+a(this).attr("id"),m[b]=[],a(c).each(function(){a(this).is(":checked")&&m[b].push(this.value)}),m[b].length<1&&a(n[b]).slideDown(),a(c).change(function(){a.inArray(this,m[b])>-1?m[b].splice(this,1):m[b].push(this),m[b].length>0&&a(n[b]).slideUp()})})}if(k){var o={};k.each(function(b){var c=a(this).attr("id"),d=a(this).find(":checkbox");o[b]={},d.each(function(){var c=a(this).attr("value");o[b][c]=this.checked}),e[c]=o[b]})}a(f).each(function(b){var c=f[b],d=".msg-required-"+c.name;c.value=g.validator.sanitize(c.value),a(c).val().length<1&&(a(d).slideDown(),a(c).addClass("required-field-border"),a(this).bind("keyup keydown change blur",function(){this.value.length>=0&&(a(d).slideUp(),a(c).removeClass("required-field-border"))}))}),a(i).each(function(b){var c=i[b],d=".msg-required-"+c.name;""===a(c).val()&&(a(d).slideDown(),a(c).addClass("required-field-border"),a(this).change(function(){""!==a(this).val()&&(a(d).slideUp(),a(c).removeClass("required-field-border"))}))}),a(j).each(function(b){var d=j[b],f=".msg-required-"+d.name,g=c.getElementById(d.id).files||c.getElementById(d.id).value;0===g.length&&(a(f).slideDown(),a(d).addClass("required-field-border"),a(this).change(function(){""!==a(this).val()&&(a(f).slideUp(),a(d).removeClass("required-field-border"))})),e[d.name]=g}),a("input, select, textarea").hasClass("required-field-border")||a(".nosform-help").is(":visible")||h.submit(e)},this.validate=function(b){function c(){a(":reset").click(function(){a(this).closest("form").find(":input:not(:submit, :reset, :button), textarea, select").val(""),a(".nosform-help").slideUp("fast"),a("input, select, textarea").removeClass("required-field-border")})}function d(b){var c=b.id||b.name;a("#"+c).keydown(function(a){this.value.length>b.maxlength&&a.preventDefault()})}function e(b){var c=".msg-minlength-"+b.name,d="#"+(b.id||b.name);a(d).keyup(function(){var d=this.value.length;d<b.minlength?a(c).slideDown():a(c).slideUp()})}function f(b){var c,d=b.name,e=".msg-invalid-"+d,f="#"+(b.id||d);a(f).bind("keyup change keydown blur",function(){switch(b.type){case"email":c=a(this).val(),c.length>0&&(g.validator.email(c)?a(e).slideUp():a(e).slideDown()),""===c&&a(e).slideUp();break;case"zip":c=a(this).val(),c.length>0&&(g.validator.zipcode(c)?a(e).slideUp():a(e).slideDown()),""===c&&a(e).slideUp();break;case"tel":c=a(this).val(),c.length>0&&(g.validator.phone(c)?a(e).slideUp():a(e).slideDown()),""===c&&a(e).slideUp()}})}a.each(b,function(b,g){g.mask&&(a.mask?a("#"+(g.id||g.name)).mask(g.mask):console.warn('You must include the masked input plugin to use "mask". Go here: https://github.com/digitalBush/jquery.maskedinput')),"reset"===g.type&&c(),("email"===g.type||"zip"===g.type||"tel"===g.type)&&f(g),g.maxlength&&d(g),g.minlength&&e(g)})},this.build=function(){var b="",c=this.settings.fields;a.each(c,function(){var c=this;a.each(g.elements,function(d){a.inArray(c.type,this)>-1&&(b+=g.getElements[d](c))})}),this.render(b)},this.render=function(c){a(b).append(c)},this.init()}var e="nosForm",f={fields:{},validate:!0,htmlValidation:!1};a.extend(d.prototype,{init:function(){var b=this.settings,c=this;this.errorMessages(),this.htmlValidation(),this.build(),this.settings.validate&&this.validate(this.settings.fields),this.form.submit(function(d){d.preventDefault(),b.validate&&c.submitValidation(a(this))})},errorMessages:function(){var a=this.settings;"object"!=typeof a.fields&&console.warn("Your form data is not an object!"),"boolean"!=typeof a.validate&&console.warn('"validate" must have a boolean value!'),"boolean"!=typeof a.htmlValidation&&console.warn('"htmlValidation" must have a boolean value!'),"function"!=typeof a.submit&&console.warn('"submit" must be a function!')}}),a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document);